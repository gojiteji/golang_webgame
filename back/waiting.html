<html lang="ja">
<title>ヒトあつめ</title>
<head>
    <meta charset="UTF-8">
    <title>Sample App</title>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>

<body>
<script>
    var url = "ws://" + window.location.host + "/sampleapp/ws";
    var name = {{.myname}};
    var mem={{.u}}
    ws = new WebSocket(url);
    runonce=true

    var text = document.getElementById("text");
    ws.onmessage = function (msg) {
        if((runonce) && (msg.data==name)) {
            runonce=false
        }else{ document.getElementById("members").appendChild(document.createElement("li")).innerText = msg.data}

    };
    function sendms(){
        ws.send(name)
    }

    setTimeout("sendms();", 1500);
</script>


    <h2>Waiting For your Friends </h2>
    <br>
    <a>share below room id to join!</a>
    <br>
    <font color="green">{{.id}}</font>
    <br>
    <ol id="members">
        {{range .u}}
        <li>{{.}}</li>

    {{end}}
    </ol>
    {{.myindex}}. is you.
    <br>
    {{if eq .IsHost true}}
    <form id="form" method="get" action="/Start">
        <button type="submit">Start</button>
    </form>
    {{end}}
</body>
</html>